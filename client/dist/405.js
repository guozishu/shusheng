(self.webpackChunkclient=self.webpackChunkclient||[]).push([[405],{5405:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(7294);function i(e){var t=(0,a.useState)([]),n=t[0],i=t[1],l=(0,a.useState)(""),c=l[0],r=l[1],s=(0,a.useState)(-1),o=s[0],m=s[1],u=(0,a.useState)([]),d=u[0],f=u[1],p=(0,a.useState)(""),v=p[0],E=p[1],N=function(e){return fetch(e.url,{body:JSON.stringify(e.params),headers:{"content-type":"application/json"},method:"POST"}).then((function(e){return e.json()}))},h=function(){N({url:"/query",params:{name:"articleType",fields:"id,name"}}).then((function(e){i(e.data)}))},y=function(e){m(e),N({url:"/query",params:{name:"articleCategory",fields:"id,name",condition:"pid="+e}}).then((function(e){f(e.data)}))};return(0,a.useEffect)((function(){h()}),[]),a.createElement("div",{className:"container"},a.createElement("div",{className:"columns is-multiline is-mobile"},n.map((function(e,t){var n=e.id,i=e.name;return a.createElement("div",{key:n,className:"column is-one-quarter is-3"},a.createElement("div",{className:"column__name",onClick:function(){y(n)}},i,a.createElement("button",{onClick:function(){return function(e){window.confirm("确定删除当前菜单？")&&N({url:"/delete",params:{name:"articleType",fields:{id:e}}}).then((function(e){e.code?alert("删除失败."):(h(),alert("删除成功."))}))}(n)},className:"delete"})))}))),a.createElement("div",{className:"notification is-success is-light"},a.createElement("div",{className:"block"},a.createElement("div",{className:"field is-grouped"},a.createElement("div",{className:"control is-expanded"},a.createElement("input",{className:"input",value:c,onChange:function(e){return r(e.target.value)},type:"text",placeholder:"一级菜单名"})),a.createElement("div",{className:"control"},a.createElement("button",{className:"button is-primary",onClick:function(){if(window.confirm("确定新增当前菜单？")){if(!c)return void alert("菜单不能为空.");N({url:"/insert",params:{name:"articleType",fields:{name:c}}}).then((function(e){e.code?alert("新增失败."):(h(),alert("新增成功."))}))}}},"新增"))))),a.createElement("h2",null,"二级菜单"),a.createElement("div",{className:"columns is-multiline is-mobile"},d.map((function(e,t){var n=e.id,i=e.name;return a.createElement("div",{key:n,className:"column is-one-quarter is-3"},a.createElement("div",{className:"column__name is-danger"},i,a.createElement("button",{onClick:function(){return function(e){window.confirm("确定删除当前菜单？")&&N({url:"/delete",params:{name:"articleCategory",fields:{id:e}}}).then((function(e){e.code?alert("删除失败."):(y(o),alert("删除成功."))}))}(n)},className:"delete"})))}))),a.createElement("div",{className:"notification is-success is-light"},a.createElement("div",{className:"block"},a.createElement("div",{className:"field is-grouped"},a.createElement("div",{className:"control is-expanded"},a.createElement("input",{className:"input",value:v,onChange:function(e){return E(e.target.value)},type:"text",placeholder:"二级菜单名"})),a.createElement("div",{className:"control"},a.createElement("button",{className:"button is-primary",onClick:function(){if(window.confirm("确定新增当前菜单？")){if(!v||o<0)return void alert("菜单或一级菜单不能为空.");N({url:"/insert",params:{name:"articleCategory",fields:{pid:o,name:v,cust_id:Date.now().toString()}}}).then((function(e){e.code?alert("新增失败."):(y(o),alert("新增成功."))}))}}},"新增"))))))}}}]);
//# sourceMappingURL=405.js.map